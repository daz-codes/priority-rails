<% highlight = local_assigns[:highlight] %>
<li id="<%= dom_id(task) %>"
    data-id="<%= task.id %>"
    class="task_container<%= highlight_class(task.id, highlight) %>">
  <%= turbo_frame_tag "task_frame_#{task.id}" do %>
    <div <%= "class=completed" if task.completed? %>
         data-controller="task"
         data-task-url-value="<%= task_path(task) %>">

      <%= check_box_tag "task_checkbox_#{task.id}", "1", task.completed?, data: { action: "task#toggle" } %>
      <%= link_to task.description, edit_task_path(task), class: "task #{'completed' if task.completed?}" %>
      <%= render "tasks/actions", task: task unless @priority %>
    </div>

    <%= render "tasks/info", task: task if @filter %>
    <%= render "tasks/note", task: task %>
  <% end %>

</li>
