<div id="priority-menu" data-controller="menu" class="relative w-full sm:w-auto sm:inline-block">
  <button data-action="click->menu#toggle" class="font-brand text-3xl w-full sm:w-auto sm:px-12 py-1.5 rounded-full bg-surface-primary border-2 border-border-input hover:border-green-400 hover:bg-green-50 hover:text-black transition-all duration-100 cursor-pointer">
    PR<span class="text-brand-blue">!</span>OR<span class="text-brand-green">!</span>TY<span class="text-brand-red">!</span>
  </button>

  <div data-menu-target="modal" hidden class="fixed left-1/2 -translate-x-1/2 mt-2 w-72 sm:w-[30rem] bg-surface-primary rounded-xl shadow-lg border border-border-primary z-50 overflow-hidden">
    <div class="p-3 border-b border-border-secondary">
      <input data-menu-target="input"
             data-action="keydown->menu#createList"
             type="text"
             placeholder="New list..."
             class="w-full px-3 py-2 rounded-lg border border-border-primary text-sm focus:outline-none focus:border-green-400 focus:ring-1 focus:ring-green-400">
    </div>

    <ul class="list-none p-0 m-0 max-h-64 overflow-y-auto">
      <%= render partial: "lists/list", collection: Current.user.lists, as: :list, locals: { current_list: @list } %>
    </ul>

    <div class="p-3 border-t border-border-secondary flex items-center gap-2">
      <%= button_to session_path, method: :delete, class: "inline-flex flex-1" do %>
        <span class="inline-flex items-center justify-center gap-1.5 w-full px-4 py-1.5 rounded-full border border-border-input text-sm font-semibold text-text-secondary hover:bg-surface-hover hover:text-text-primary transition-all duration-100 cursor-pointer">
          <i class="fa-solid fa-right-from-bracket text-xs"></i> Sign Out
        </span>
      <% end %>
      <button data-action="click->theme#toggle" class="inline-flex items-center justify-center size-9 rounded-full border border-border-input text-text-secondary hover:bg-surface-hover hover:text-text-primary transition-all duration-100 cursor-pointer bg-surface-primary" title="Toggle dark mode">
        <i data-theme-target="icon" class="fa-solid fa-moon text-xs"></i>
      </button>
    </div>
  </div>
</div>
